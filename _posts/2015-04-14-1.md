---
layout: post
category : Notes
tagline: ""
title: "闭包"
tags : [html, css, js]
---
{% include JB/setup %}

**一、闭包的概念**

**二、闭包的作用**

闭包可以用在许多地方。它的最大用处有两个，一个是前面提到的可以读取函数内部的变量，另一个就是让这些变量的值始终保持在内存中。

**三、使用闭包**

	<body>
	    <ul>
	        <li>aaaaaaaaaaa</li>
	        <li>bbbbbbbbbbb</li>
	        <li>cccccccccccccc</li>
	        <li>bbbbbbbbbbb</li>
	    </ul>
	</body>

	<script type="text/javascript">
	    window.onload=function(){
	        var oLis=document.getElementsByTagName('li');
	        for(var i=0;i<oLis.length;i++){
	            oLis[i].onclick=function(){
	                alert(i);//弹出来的总是4，为什么呢？
	            };
	        }
	     };
	 </script>


因为onclick事件是当你点击的时候才会触发的，但是当你点击的时候for循环早就执行完毕了，所以每次点击都是最后一个值，说漏了，在执行for循环的时候其实function(){alert(i);};是没有执行的，那么怎么样才能让它弹出0，1，2。。。呢? 按如下方式使用闭包。

	<script type="text/javascript">
	window.onload=function(){
	    var oLis=document.getElementsByTagName('li');
	    for(var i=0;i<oLis.length;i++){
	    (function(i){
	        oLis[i].onclick=function(){
	            alert(i);//这次就依次弹出0，1，2，3了
	        };
	    })(i);
	    }
	};
	</script>